<div ng-form name="taxonForm" class="bauble-editor taxon-editor container">
  <alert class="span6 offset3" ng-repeat="alert in alerts" type="alert.type"
         close="closeAlert($index)">{{alert.msg}}</alert>

  <h3>{{taxon.str || 'New taxon'}}</h3>

  <div class="editor-body">

    <tabset>
      <tab heading="General">
        <form role="form">

          <div class="form-group">
            <label for="genus-input">Genus</label>
            <input type="text" ng-model="$parent.genus" id="genus-input"
                   typeahead-min-length="2"
                   placeholder="Genus" typeahead-editable="false"
                   typeahead="genus as genus.str for genus in getGenera($viewValue)"
                   typeahead-input-formatter="genus.str"
                   typeahead-loading="loadingGenera" class="form-control">
          </div> <!-- .form-grouo -->

          <div class="form-group">
            <label for="hybrid-input">Hybrid</label>
            <input type="checkbox" ng-model="taxon.hybrid" id="hybrid-input">
          </div> <!-- .form-group -->

          <div class="form-group">
            <label for="species-input">Species</label>
            <input type="text" ng-model="taxon.sp" id="species-input"
                     class="form-control"/>
          </div> <!-- .form-group -->

          <div class="form-group">
            <label for="author-input">Author</label>
            <input type="text" ng-model="taxon.sp_author" id="author-input"
                     class="form-control"/>
          </div> <!-- .form-group -->

          <div class="form-group">
            <label>Cultivar Group</label>
            <input type="text" ng-model="taxon.cv_group" class="form-control"
                   id="cultivar-group-input">
          </div> <!-- .form-group -->

          <div class="form-group">
            <label for="species-qual-input">Species qualifier</label>
            <select ng-model="taxon.sp_qual" ng-options="q for q in qualifiers"
                      class="form-control" id="species-qual-input"></select>
          </div>


          <div class="infraspecific-container">
            <h4>Infraspecific parts</h4>
            <div class="row">
              <div class="col-md-2">
                <label class="control-label">Rank</label>
              </div>
              <div class="col-md-2">
                <label class="control-label">Epithet</label>
              </div>
              <div class="col-md-2">
                <label class="control-label">Author</label>
              </div>
            </div> <!-- .row -->

            <div class="row">
              <div class="col-md-2">
                <select ng-model="taxon.infrasp1_rank" ng-options="q for q in ranks"
                        class="form-control"></select>
              </div>
              <div class="col-md-2">
                <input class="form-control" type="text" ng-model="taxon.infrasp1"/>
              </div>
              <div class="col-md-2">
                <input class="form-control"type="text" ng-model="taxon.infrasp1_author"/>
              </div>
            </div> <!-- .row -->

            <div class="row">
              <div class="col-md-2">
                <select ng-model="taxon.infrasp2_rank" ng-options="q for q in ranks"
                        class="form-control"></select>
              </div>
              <div class="col-md-2">
                <input class="form-control" type="text" ng-model="taxon.infrasp2"/>
              </div>
              <div class="col-md-2">
                <input class="form-control"type="text" ng-model="taxon.infrasp2_author"/>
              </div>
            </div> <!-- .row -->

            <div class="row">
              <div class="col-md-2">
                <select ng-model="taxon.infrasp3_rank" ng-options="q for q in ranks"
                        class="form-control"></select>
              </div>
              <div class="col-md-2">
                <input class="form-control" type="text" ng-model="taxon.infrasp3"/>
              </div>
              <div class="col-md-2">
                <input class="form-control"type="text" ng-model="taxon.infrasp3_author"/>
              </div>
            </div> <!-- .row -->

          </div> <!-- .infraspecific-container -->
        </form>
      </tab>

      <tab heading="Additional info">
        <form class="form-horizontal">

          <div class="form-group">
            <label class="control-label col-md-2" for="distField">
              Distribution</label>
            <div class="col-md-4">
              <input type="text" class="form-control" ng-model="distribution"
                     id="distfield"/>
            </div>
          </div> <!-- .form-group -->

          <div class="form-group">
            <label class="control-label col-md-2">Label Distribution</label>
            <div class="col-md-4">
              <input type="text" class="form-control" ng-model="labelDistField"
                     id="labelDistfield"/>
            </div>
          </div> <!-- .form-group -->

          <div class="form-group">
            <label class="control-label col-md-2" for="habitatField">Habit</label>
            <div class="col-md-4">
              <input type="text" class="form-control" ng-model="habitat"
                     id="habitatField"/>
            </div>
          </div> <!-- .form-group -->

          <div class="form-group">
            <label class="control-label col-md-2">Awards</label>
            <div class="col-md-4">
              <input type="text" class="form-control" ng-model="awards"
                     id="awardsField"/>
            </div>
          </div>

          <div class="row">
            <div class="col-md-10 vernacular-name-container">
              <h4>Vernacular Names</h4>

              <div class="row">
                <div class="col-md-3">
                  <label>Verncular name</label>
                </div>
                <div class="col-md-3">
                  <label>Language</label>
                </div>
                <div class="col-md-2">
                  <label>Default</label>
                </div>
              </div> <!-- .row -->

              <div class="row" ng-repeat="vernacular in taxon.vernacular_names">
                <div class="col-md-3">
                  <input type="text" value="{{vernacular.name}}" class="form-control"
                         ng-model="vernacular.name"/>
                </div>

                <div class="col-md-3">
                  <input type="text" value="{{vernacular.language}}" class="form-control"
                         ng-model="vernacular.language"/>
                </div>


                  <div class="col-md-2">
                    <div class="checkbox">
                      <input type="checkbox" class="input-lg"
                             ng-model="vernacular.default"
                             value="{{vernacular.default}}"/>

                    </div> <!-- .checkbox -->
                  </div>   <!-- .col -->

              </div> <!-- .row -->

              <button class="btn" ng-click="addVernacularName()">Add</button>

            </div> <!-- .vernacular-name-container -->
          </div> <!-- .row -->

              <!-- <div class="contents"> -->
            <!--     <table> -->
            <!--       <thead> -->
            <!--         <td>Vernacular name</td> -->
            <!--         <td>Language</td> -->
            <!--         <td>Default</td> -->
            <!--       </thead> -->
            <!--       <tr ng-repeat="vernacular in taxon.vernacular_names"> -->
            <!--         <td><input type="text" value="{{vernacular.name}}"/></td> -->
            <!--         <td><input type="text" value="{{vernacular.language}}"/></td> -->
            <!--         <td><input type="checkbox" class="input-small" value="{{vernacular.default}}"/></td> -->
            <!--       </tr> -->
            <!--     </table> -->
            <!--     <button class="btn" ng-click="addVernacularName()">Add</button> -->
            <!--   </div> <\!-- .contents -\-> -->
            <!-- </div> -->

            <div class="row">
              <div class="col-md-6 synonyms-box">
                <label>Synonyms</label>
                <input id="taxonSynonymField" style="width: 200px" ui-select2="synSelectOptions" ng-model="selectedSyn"/>
                <button class="btn" ng-click="addSynonym(selectedSyn); selectedSyn=null;" ng-disabled="!selectedSyn">Add</button>

                <ul>
                  <li ng-repeat="synonym in taxon.synonyms">{{synonym.str}}</li>
                </ul>

              </div> <!-- .synonyms-box -->
            </div> <!-- .row -->
        </form>

      </tab>

      <!-- <tab heading="Notes">
      <div ng-include="'views/notes_editor.html'"></div>
      </tab> -->

    </tabset>

  </div> <!-- .editor-body -->

  <div class="action-buttons">
    <button class="btn btn-default" ng-click="cancel()">Cancel</button>
    <button class="btn btn-primary" ng-click="save()">Save</button>
  </div>

</div> <!-- .taxon-editor -->
